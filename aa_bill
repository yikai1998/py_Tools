import pandas as pd
import numpy as np

number = int(input('>> è¾“å…¥æ€»äººæ•°ï¼š'))
people_list = []
for i in range(number):
    name = input(f'>> è¾“å…¥ç¬¬{i+1}ä½å§“åï¼š')
    people_list.append(name)

print(f'\näººå‘˜åå•ï¼š{people_list}')
bill_df = pd.DataFrame(data=np.array([[0.0] * number] * number), columns=people_list, index=people_list)
while True:
    payer = input('>> è¯·é€‰æ‹©ä»˜æ¬¾äººï¼š')
    fee = float(input('>> è¯·è¾“å…¥æ€»é‡‘é¢ï¼š'))
    member = input('>> è¯·è¾“å…¥æ‰€æœ‰å—ç›Šäººï¼Œä»¥é€—å·,åˆ†éš”ï¼Œä¸èƒ½æœ‰ç©ºæ ¼ï¼š')
    member = member.split(',')
    aa_amount = round(fee/len(member), 2)
    bill_df.loc[bill_df.index==payer] += aa_amount
    c = input('>> è¾“å…¥cé”®ä»¥é€€å‡ºï¼Œè¾“å…¥å…¶ä»–ä»»æ„é”®ä»¥ç»§ç»­')
    if c == 'c':
        break

for i in bill_df.index:
    bill_df.loc[i, i] = 0

bill_df['total_receive'] = bill_df.sum(axis=1)
bill_df['total_pay'] = bill_df.sum(axis=0)
bill_df['net_off'] = bill_df['total_receive'] - bill_df['total_pay']
print(bill_df)

print('>> ç»“è®ºï¼š')
for name in bill_df.index:
    amount = round(bill_df.loc[bill_df.index==name, 'net_off'].values[0], 2)
    pay_rev = 'åº”æ”¶æ¬¾ ' if amount > 0 else 'åº”ä»˜æ¬¾ '
    print(f'{name} {pay_rev}{amount}(å…ƒ)')

----------------------------------------------------

import tkinter as tk
from tkinter import ttk

# å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥æ·»åŠ æ•°æ®åˆ°è¡¨æ ¼
def add_row():
    # ä»ä¸‹æ‹‰èœå•ä¸­è·å–å€¼
    values = [cb1.get(), cb2.get(), cb3.get()]
    # åˆ›å»ºæ–°çš„è¡Œå¹¶æ·»åŠ åˆ°è¡¨æ ¼ä¸­
    tree.insert('', 'end', values=values)

# åˆ›å»ºä¸»çª—å£
root = tk.Tk()
root.title("AA Bill Tool")
root.columnconfigure(0, weight=1)
root.columnconfigure(1, weight=1)
root.columnconfigure(2, weight=1)
root.columnconfigure(3, weight=1)
root.rowconfigure(0, weight=1)
root.rowconfigure(1, weight=1)
root.rowconfigure(2, weight=1)

# åˆ›å»ºä¸€ä¸ªTreeviewæ§ä»¶æ¥æ¨¡æ‹Ÿè¡¨æ ¼
tree = ttk.Treeview(root, columns=('Column 1', 'Column 2', 'Column 3'), show='headings')
tree.heading('Column 1', text='ä»˜æ¬¾äºº')
tree.heading('Column 2', text='å‚ä¸äºº')
tree.heading('Column 3', text='é‡‘é¢')
tree.column('Column 1', width=100)
tree.column('Column 2', width=100)
tree.column('Column 3', width=100)
tree.grid(row=0, column=0, sticky="nsew", padx=10, pady=10, columnspan=3, rowspan=2)

# åˆ›å»ºä¸€ä¸ªå‚ç›´æ»šåŠ¨æ¡
scrollbar = ttk.Scrollbar(root, orient="vertical", command=tree.yview)
scrollbar.grid(row=0, column=3, sticky="nsew", padx=10, pady=10, rowspan=2)

# é…ç½®Treeviewä½¿ç”¨æ»šåŠ¨æ¡
tree.config(yscrollcommand=scrollbar.set)

# åˆ›å»ºä¸‰ä¸ªä¸‹æ‹‰èœå•ï¼ˆComboboxï¼‰
cb1 = ttk.Combobox(root, values=('å‡¯é€¼', 'è–›ç‹—', 'ç”°ä¸œ'))
cb2 = ttk.Combobox(root, values=('å‡¯é€¼', 'è–›ç‹—', 'ç”°ä¸œ'))
cb3 = tk.Entry(root)

# å¸ƒå±€ä¸‹æ‹‰èœå•
cb1.grid(row=2, column=0, sticky="nsew", padx=10, pady=10)
cb2.grid(row=2, column=1, sticky="nsew", padx=10, pady=10)
cb3.grid(row=2, column=2, sticky="nsew", padx=10, pady=10)

# åˆ›å»ºä¸€ä¸ªæ·»åŠ æŒ‰é’®
add_button = ttk.Button(root, text="Add Row", command=add_row)
add_button.grid(row=2, column=3, sticky="nsew", padx=10, pady=10)

# å¯åŠ¨äº‹ä»¶å¾ªç¯
root.mainloop()

----------------------------------------------------------

import tkinter as tk
from tkinter import ttk


def add_row():
    values = [cb1.get(), cb2.var, cb3.get()]
    tree.insert('', 'end', values=values)


def calculate():
    bill = [tree.item(r, 'values') for r in tree.get_children()]
    print(bill)


class MultiSelectDropdown(tk.Frame):
    def __init__(self, parent, options, title='ğŸ‘‰æ— äººå‚ä¸'):
        super().__init__(parent)
        self.options = options
        self.button_str = tk.StringVar(value=title)
        self.var = ''
        self.selected_vars = {option: tk.BooleanVar() for option in options}
        self.button = tk.Button(self, textvariable=self.button_str, command=self.show_menu)
        self.button.grid(row=3, column=1)
        self.menu_frame = tk.Frame(self)

        for option in options:
            checkbox = tk.Checkbutton(self.menu_frame, text=option, variable=self.selected_vars[option])
            checkbox.pack(anchor='w')

        self.submit_button = tk.Button(self.menu_frame, text='ç¡®è®¤', command=self.apply_selection)
        self.submit_button.pack()

    def show_menu(self):
        if self.menu_frame.winfo_ismapped():
            self.menu_frame.grid_remove()
        else:
            self.menu_frame.grid()

    def apply_selection(self):
        selected_items = [option for option, var in self.selected_vars.items() if var.get()]
        self.var = ", ".join(selected_items) if selected_items else ''
        self.button_str.set('ğŸ‘‰åå•è¯¦æƒ…' if selected_items else 'ğŸ‘‰æ— äººå‚ä¸')
        update_selection_label()
        self.menu_frame.grid_remove()


def update_selection_label():
    selected_items = cb2.var
    selection_label.config(text=selected_items)

# main structure of windows
root = tk.Tk()
root.title("AA Bill Tool")
root.columnconfigure(0, weight=1)
root.columnconfigure(1, weight=1)
root.columnconfigure(2, weight=1)
root.columnconfigure(3, weight=1)
root.rowconfigure(0, weight=1)
root.rowconfigure(1, weight=1)
root.rowconfigure(2)
root.rowconfigure(3)
root.rowconfigure(4)
root.rowconfigure(5)

# data table
tree = ttk.Treeview(root, columns=('Column 1', 'Column 2', 'Column 3'), show='headings')
tree.heading('Column 1', text='ä»˜æ¬¾äºº')
tree.heading('Column 2', text='å‚ä¸äºº')
tree.heading('Column 3', text='é‡‘é¢')
tree.column('Column 1', width=100)
tree.column('Column 2', width=100)
tree.column('Column 3', width=100)
tree.grid(row=0, column=0, sticky="nsew", padx=10, pady=10, columnspan=3, rowspan=2)


# scroll bar
scrollbar = ttk.Scrollbar(root, orient="vertical", command=tree.yview)
scrollbar.grid(row=0, column=3, sticky="nsew", padx=10, pady=10, rowspan=2)
tree.config(yscrollcommand=scrollbar.set)

# dropdown menu and string-box used for input
text1 = tk.Label(root, text='ä»˜æ¬¾äºº', bg='green', fg='red', font='åæ–‡æ–°é­ 10 bold').grid(row=2, column=0, sticky="nsew", padx=10, pady=10)
text2 = tk.Label(root, text='å‚ä¸äºº', bg='yellow', fg='blue', font='åæ–‡æ–°é­ 10 bold').grid(row=2, column=1, sticky="nsew", padx=10, pady=10)
text3 = tk.Label(root, text='é‡‘é¢', bg='orange', fg='black', font='åæ–‡æ–°é­ 10 bold').grid(row=2, column=2, sticky="nsew", padx=10, pady=10)
cb1 = ttk.Combobox(root, values=('å‡¯é€¼', 'è–›ç‹—', 'ç”°ä¸œ'), textvariable='hey')
cb2 = MultiSelectDropdown(parent=root,options=['å‡¯é€¼', 'è–›ç‹—', 'ç”°ä¸œ'])
cb3 = tk.Entry(root)
cb1.grid(row=3, column=0, sticky="nsew", padx=10, pady=10)
cb2.grid(row=4, column=1, sticky="nsew", padx=10, pady=10)
cb3.grid(row=3, column=2, sticky="nsew", padx=10, pady=10)


selection_label = tk.Label(root, text='')
selection_label.grid(row=3, column=1, sticky="nsew", padx=10, pady=10)

# add-on button
add_button = ttk.Button(root, text="Add Row", command=add_row)
add_button.grid(row=2, column=3, sticky="nsew", padx=10, pady=10)

# calculate button
calculate_button = ttk.Button(root, text="Generate Bill", command=calculate)
calculate_button.grid(row=3, column=3, sticky="nsew", padx=10, pady=10)


root.mainloop()


